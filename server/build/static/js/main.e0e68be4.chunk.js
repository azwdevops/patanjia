(this["webpackJsonpmern-auth"]=this["webpackJsonpmern-auth"]||[]).push([[0],{16:function(e,t,a){"use strict";var s=a(38);a.d(t,"activateAccount",(function(){return s.a})),a.d(t,"addNewTitle",(function(){return s.b})),a.d(t,"changePassword",(function(){return s.c})),a.d(t,"resendActivation",(function(){return s.d})),a.d(t,"resetPassword",(function(){return s.e})),a.d(t,"setPassword",(function(){return s.f})),a.d(t,"signIn",(function(){return s.g})),a.d(t,"signupUser",(function(){return s.h}));var n=a(47);a.d(t,"updateUser",(function(){return n.a}));var r=a(48);a.d(t,"getAllTitles",(function(){return r.a})),a.d(t,"getUser",(function(){return r.b}));a(49)},17:function(e,t,a){"use strict";t.a={success:"success",error:"error",fillFields:"Please fill all fields",unknown_error:"An unknown error occurred, please try again later",dev:!1,liveProduction:!0,devHome:"http://localhost:8000",productionHome:"http://patanjia.azwgroup.com"}},38:function(e,t,a){"use strict";a.d(t,"h",(function(){return n})),a.d(t,"a",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"g",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return u}));var s=a(9);const n=e=>s.a.post("/api/user/signup/",e),r=e=>s.a.post("/api/user/activate-user-account/",{activation_token:e}),i=e=>s.a.post("/api/user/resend-account-activation-link/",{email:e}),l=e=>s.a.post("/api/user/login/",e),o=e=>s.a.post("/api/user/user-request-password-reset/",{email:e}),c=(e,t)=>s.a.post("/api/user/user-set-new-password/",{...e,password_token:t}),d=(e,t)=>s.a.post("/api/user/change-user-password/".concat(t,"/"),e),u=(e,t)=>s.a.post("/api/search/maintain-titles/".concat(e,"/"),t)},47:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var s=a(9);const n=(e,t)=>s.a.patch("/api/user/update-user-details/".concat(t,"/"),e)},48:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var s=a(9);const n=()=>s.a.get("/api/user/get-user-data/"),r=e=>s.a.get("/api/search/maintain-titles/".concat(e,"/"))},49:function(e,t){},50:function(e,t,a){},62:function(e,t,a){},68:function(e,t,a){},70:function(e,t,a){},89:function(e,t,a){},9:function(e,t,a){"use strict";var s=a(52),n=a.n(s),r=a(17);const{liveProduction:i,devHome:l,productionHome:o}=r.a;let c;c=i?o:l;const d=n.a.create({baseURL:c});d.interceptors.request.use((e=>(localStorage.getItem("session_cookie")&&(e.headers.Authorization="Bearer ".concat(localStorage.getItem("session_cookie")),e.headers.Accept="application/json"),e))),t.a=d},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},93:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),r=a(10),i=a.n(r),l=(a(62),a(5)),o=a(7),c=a(3),d=(a(68),a(0));var u=()=>localStorage.getItem("session_cookie")?Object(d.jsx)(c.b,{}):Object(d.jsx)(c.a,{to:"/"}),j=(a(70),a(118));const b=()=>{const e=document.getElementById("nav-bar"),t=document.getElementById("body-pd");e.classList.toggle("show"),t.classList.toggle("body-pd")};var h=a(116),m=a(17);const v=e=>{for(const t in e)if(""==="".concat(e[t]))return!0;return!1},p=e=>{for(const t in e)e[t]=""};var O=a(117);var g=e=>Object(d.jsx)(O.a,{open:e.isOpen,style:{maxWidth:"500px",minWidth:"",margin:"0 auto"},fullWidth:!0,children:e.children});const x="OPEN_SIGNUP",_="CLOSE_SIGNUP",f="OPEN_LOGIN",w="CLOSE_LOGIN",y="AUTH_SUCCESS",N="LOGOUT",S="OPEN_FORGOT_PASSWORD",C="CLOSE_FORGOT_PASSWORD",F="OPEN_RESEND_ACTIVATION",P="CLOSE_RESEND_ACTIVATION",L="OPEN_PASSWORD_RESET_CONFIRM",k="CLOSE_PASSWORD_RESET_CONFIRM",I="OPEN_CHANGE_PASSWORD",A="CLOSE_CHANGE_PASSWORD",E="START_LOADING",T="STOP_LOADING",U="NEW_TITLE",D="SET_TITLES";var R=a(16);const B=e=>{var t,a,s,n,r;400===(null===e||void 0===e||null===(t=e.response)||void 0===t?void 0:t.status)||401===(null===e||void 0===e||null===(a=e.response)||void 0===a?void 0:a.status)||403===(null===e||void 0===e||null===(s=e.response)||void 0===s?void 0:s.status)?window.alert(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail):window.alert("An unknown error occurred")},W=e=>{e({type:T})},{error:q,success:H,unknown_error:G}=m.a,M=()=>async e=>{await R.getUser().then((t=>{var a;e({type:y,payload:null===(a=t.data)||void 0===a?void 0:a.user})})).catch((t=>{e({type:N}),localStorage.clear()}))},V=e=>async t=>{localStorage.clear(),t({type:N}),e("/",{replace:!0})};var z=Object(l.b)((e=>{var t;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,loginForm:e.auth.loginForm}}),(e=>({startLoading:()=>e({type:E}),loginUser:(t,a)=>e(((e,t)=>async a=>{await R.signIn(e).then((e=>{var s;localStorage.setItem("session_cookie",null===(s=e.data)||void 0===s?void 0:s.access),t(),a({type:w}),a(M())})).catch((e=>B(e))).finally((()=>W(a)))})(t,a)),closeLogin:()=>e({type:w}),openPasswordReset:()=>e({type:S}),openSignup:()=>e({type:x}),openResendActivation:()=>e({type:F})})))((e=>{const{loading:t,loginForm:a}=e,{startLoading:n,loginUser:r,closeLogin:i,openPasswordReset:l,openSignup:o,openResendActivation:c}=e,[u,j]=Object(s.useState)({email:"",password:""}),{error:b}=m.a,{email:O,password:x}=u,_=()=>{p(u)},f=e=>{j({...u,[e.target.name]:e.target.value})};return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(g,{isOpen:a,children:Object(d.jsxs)("form",{className:"dialog",id:t?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Login here"}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",onChange:f,value:O})]}),t&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"40%"}}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",onChange:f,value:x})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{i(),_()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>{if(e.preventDefault(),v(u))return window.alert("Email and password required");n(),r(u,_)},children:"Login"})]}),Object(d.jsxs)("div",{className:"extra__formButtons",children:[Object(d.jsx)("label",{htmlFor:"",className:"button",onClick:()=>{l(),i()},children:"Forgot Password"}),Object(d.jsx)("label",{htmlFor:"",className:"button",style:{justifySelf:"end"},onClick:()=>{o(),i()},children:"Create Account"})]}),Object(d.jsx)("div",{className:"extra__formButtons",children:Object(d.jsx)("label",{htmlFor:"",className:"button",onClick:()=>{c(),i()},children:"Resend Activation"})})]})})})}));var J=e=>Object(d.jsx)(O.a,{open:e.isOpen,maxWidth:"md",style:{maxWidth:null===e||void 0===e?void 0:e.maxWidth,margin:"auto"},fullWidth:!0,children:e.children});var Z=Object(l.b)((e=>{var t;return{signupForm:e.auth.signupForm,loading:null===(t=e.shared)||void 0===t?void 0:t.loading}}),(e=>({startLoading:()=>e({type:E}),closeSignup:()=>e({type:_}),signupUser:(t,a)=>e(((e,t)=>async a=>{await R.signupUser(e).then((e=>{var a;window.alert(null===(a=e.data)||void 0===a?void 0:a.detail),t()})).catch((e=>B(e))).finally((()=>W(a)))})(t,a))})))((e=>{const{loading:t,signupForm:a}=e,{startLoading:n,closeSignup:r,signupUser:i}=e,[l,o]=Object(s.useState)({first_name:"",last_name:"",username:"",email:"",password:"",confirm_password:""}),{first_name:c,last_name:u,username:j,email:b,password:O,confirm_password:g}=l,{error:x,fillFields:_}=m.a,f=()=>{p(l)},w=e=>{o({...l,[e.target.name]:e.target.value})};return Object(d.jsx)(J,{isOpen:a,children:Object(d.jsxs)("form",{className:"dialog",id:t?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Create new account"}),Object(d.jsxs)("div",{className:"dialog__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"First Name"}),Object(d.jsx)("input",{type:"text",name:"first_name",value:c,onChange:w,required:!0})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Last Name"}),Object(d.jsx)("input",{type:"text",name:"last_name",value:u,onChange:w,required:!0})]})]}),t&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"43%"}}),Object(d.jsxs)("div",{className:"dialog__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Username"}),Object(d.jsx)("input",{type:"text",name:"username",value:j,onChange:w,required:!0})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",username:b,onChange:w,required:!0})]})]}),Object(d.jsxs)("div",{className:"dialog__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:O,onChange:w,required:!0})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Confirm Password"}),Object(d.jsx)("input",{type:"password",name:"confirm_password",value:g,onChange:w,required:!0})]})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{r(),f()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>(e.preventDefault(),v(l)?window.alert(_):O!==g?window.alert("Passwords should match"):(n(),void i(l,f))),children:"Sign Up"})]}),Object(d.jsx)("div",{className:"extra__formButtons"})]})})}));var K=Object(l.b)((e=>{var t,a;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,forgotPasswordForm:null===(a=e.auth)||void 0===a?void 0:a.forgotPasswordForm}}),(e=>({startLoading:()=>e({type:E}),resetPassword:(t,a)=>e(((e,t)=>async a=>{await R.resetPassword(e).then((e=>{var a;window.alert(null===(a=e.data)||void 0===a?void 0:a.detail),t()})).catch((e=>B(e))).finally((()=>W(a)))})(t,a)),closeForgotPassword:()=>e({type:C})})))((e=>{const{loading:t,forgotPasswordForm:a}=e,{startLoading:n,resetPassword:r,closeForgotPassword:i}=e,[l,o]=Object(s.useState)(""),{error:c}=m.a,u=()=>{o("")};return Object(d.jsx)(g,{isOpen:a,children:Object(d.jsxs)("form",{className:"dialog",id:t?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Enter your email to reset password"}),t&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"40%"}}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Email"}),Object(d.jsx)("input",{type:"email",onChange:e=>o(e.target.value),value:l})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{i(),u()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>{if(e.preventDefault(),""===l.trim())return window.alert("Email required");n(),r(l,u)},children:"Reset"})]})]})})}));var Q=Object(l.b)((e=>{var t,a;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,resendActivationForm:null===(a=e.auth)||void 0===a?void 0:a.resendActivationForm}}),(e=>({startLoading:()=>e({type:E}),closeResendActivation:()=>e({type:P}),resendActivation:(t,a)=>e(((e,t)=>async a=>{await R.resendActivation(e).then((e=>{var a;window.alert(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.detail),t()})).catch((e=>B(e))).finally((()=>W(a)))})(t,a))})))((e=>{const{loading:t,resendActivationForm:a}=e,{startLoading:n,closeResendActivation:r,resendActivation:i}=e,[l,o]=Object(s.useState)(""),{error:c}=m.a,u=()=>{o("")};return Object(d.jsx)(g,{isOpen:a,children:Object(d.jsxs)("form",{className:"dialog",id:t?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Enter email to resend confirmation link"}),t&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"40%"}}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Email"}),Object(d.jsx)("input",{type:"email",onChange:e=>o(e.target.value),value:l,required:!0})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{r(),u()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>{if(e.preventDefault(),""===l.trim())return window.alert("Email required");n(),i(l,u)},children:"Send"})]})]})})}));var X=()=>{const e=Object(l.c)(),t=Object(c.h)(),a=localStorage.getItem("session_cookie"),s=Object(l.d)((e=>{var t;return null===(t=e.auth.user)||void 0===t?void 0:t.username})),n=Object(l.d)((e=>{var t;return null===(t=e.auth)||void 0===t?void 0:t.userImage}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:"header",id:"header",children:[Object(d.jsxs)("div",{className:"header__toggle",children:[Object(d.jsx)("i",{className:"bx bx-menu",id:"header-toggle",onClick:b}),Object(d.jsx)("h1",{children:Object(d.jsx)(o.b,{to:"/",children:"Pata Njia"})})]}),a?Object(d.jsx)("div",{className:"header__right authenticated",children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)(j.a,{alt:s,src:n,className:"user__image",children:null===s||void 0===s?void 0:s.charAt(0)}),Object(d.jsx)("h6",{children:s}),Object(d.jsx)("i",{className:"bx bx-caret-down"})]}),Object(d.jsxs)("ul",{className:"dropdown",children:[Object(d.jsx)("li",{children:Object(d.jsx)(o.b,{to:"/dashboard/",children:"Dashboard"})}),Object(d.jsx)("li",{onClick:()=>e(V(t)),children:"Logout"})]})]})}):Object(d.jsxs)("div",{className:"header__right",children:[Object(d.jsx)("span",{className:"button",onClick:()=>e({type:f}),children:"Login"}),Object(d.jsx)("span",{className:"button",onClick:()=>e({type:x}),children:"Signup"})]})]}),Object(d.jsx)(z,{}),Object(d.jsx)(Z,{}),Object(d.jsx)(K,{}),Object(d.jsx)(Q,{})]})},Y=(a(89),a(9));var $=Object(l.b)((e=>{var t,a,s;return{userId:null===(t=e.auth)||void 0===t||null===(a=t.user)||void 0===a?void 0:a.id,loading:null===(s=e.shared)||void 0===s?void 0:s.loading}}),(e=>({startLoading:()=>e({type:E}),stopLoading:()=>e({type:T})})))((e=>{const{startLoading:t,loading:a,userId:n,stopLoading:r}=e,[i,l]=Object(s.useState)(""),[o,c]=Object(s.useState)({title:"",lat:"",lon:""});return Object(d.jsx)("div",{className:"table__parent",id:a?"pageSubmitting":"",children:Object(d.jsxs)("div",{className:"table__parentHeader",children:[Object(d.jsx)("h3",{children:"Enter title number"}),a&&Object(d.jsx)(h.a,{style:{position:"absolute"}}),Object(d.jsx)("br",{}),Object(d.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===i.trim())return window.alert("Input valid title number");t(),await Y.a.post("/api/search/valuer-get-title/".concat(n,"/"),{titleNumber:i}).then((e=>{var t;c(null===(t=e.data)||void 0===t?void 0:t.title_data)})).catch((e=>B(e))).finally((()=>r()))},children:[Object(d.jsx)("input",{type:"text",name:"",className:"search__input",onChange:e=>l(e.target.value),value:i}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{type:"submit",className:"add__button search__button",children:"Search"})]}),Object(d.jsx)("br",{}),""!==(null===o||void 0===o?void 0:o.title)&&Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("iframe",{title:null===o||void 0===o?void 0:o.title,src:"https://maps.google.com/maps?q=".concat(null===o||void 0===o?void 0:o.lat,", ").concat(null===o||void 0===o?void 0:o.lon,"&z=15&output=embed"),width:"1000",height:"500",frameBorder:"0",className:"map__iframe",allowFullScreen:!0})})]})})}));var ee=()=>Object(d.jsx)("div",{children:Object(d.jsx)($,{})});a(90);var te=e=>{let{Link:t,pathname:a}=e;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(t,{to:"/staff/maintain-titles/",className:"/staff/maintain-titles/"==="".concat(a)?"nav__link active":"nav__link",children:[Object(d.jsx)("i",{className:"bx bxs-landscape"}),Object(d.jsx)("span",{className:"nav__name",children:"Titles"})]})})};var ae=e=>{let{Link:t,pathname:a}=e;return Object(d.jsx)(d.Fragment,{})};var se=Object(l.b)((e=>{var t,a;return{loggedIn:null===(t=e.auth)||void 0===t?void 0:t.loggedIn,profile_type:null===(a=e.auth.user)||void 0===a?void 0:a.profile_type}}),(e=>({logoutUser:t=>e(V(t))})))((e=>{const t=Object(c.h)(),{pathname:a}=Object(c.g)(),{logoutUser:s}=e,{loggedIn:n,profile_type:r}=e;return Object(d.jsx)("div",{className:"left-navbar",id:"nav-bar",children:Object(d.jsxs)("nav",{className:"nav",children:[Object(d.jsxs)(o.b,{to:"",className:"nav__logo",children:[Object(d.jsx)("i",{className:"bx bx-layer nav__logo-icon"}),Object(d.jsx)("span",{className:"nav__logo-name",children:"AZW"})]}),Object(d.jsxs)("div",{className:"nav__list",children:[Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(o.b,{to:"/",className:"/"==="".concat(a)?"nav__link active":"nav__link",children:[Object(d.jsx)("i",{class:"bx bx-home"}),Object(d.jsx)("span",{className:"nav__name",children:"Home"})]})}),n&&Object(d.jsxs)(d.Fragment,{children:["Staff"===r&&Object(d.jsx)(te,{pathname:a,Link:o.b}),["Staff","Valuer"].includes(r)&&Object(d.jsx)(ae,{pathname:a,Link:o.b}),Object(d.jsxs)(o.b,{to:"/dashboard/",className:"/dashboard/"==="".concat(a)?"nav__link active":"nav__link",children:[Object(d.jsx)("i",{className:"bx bx-grid-alt nav__icon"}),Object(d.jsx)("span",{className:"nav__name",children:"Dashboard"})]}),Object(d.jsxs)(o.b,{to:"/profile/",className:"/profile/"==="".concat(a)?"nav__link active":"nav__link",children:[Object(d.jsx)("i",{class:"bx bx-user nav__icon"}),Object(d.jsx)("span",{className:"nav__name",children:"Profile"})]}),Object(d.jsxs)(o.b,{to:"",className:"nav__link",onClick:()=>s(t),children:[Object(d.jsx)("i",{className:"bx bx-log-out-circle"}),Object(d.jsx)("span",{className:"nav__name",children:"Logout"})]})]})]})]})})}));a(91);var ne=()=>Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"Dashboard"})});a(50);var re=Object(l.b)((e=>{var t;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading}}),(e=>({startLoading:()=>e({type:E}),activateUser:(t,a)=>{return e((s={activation_token:t,history:a},async e=>{const{activation_token:t,navigate:a}=s;await R.activateAccount(t).then((t=>{var a;alert(null===(a=t.data)||void 0===a?void 0:a.detail),e({type:f})})).catch((t=>{var a;400===t.response.status?(alert(null===(a=t.response.data)||void 0===a?void 0:a.detail),e({type:F})):alert(G)})).finally((()=>{e({type:T}),a("/",{replace:!0})}))}));var s}})))((e=>{const{activation_token:t}=Object(c.i)(),a=Object(c.h)(),{loading:s}=e,{startLoading:n,activateUser:r}=e;return Object(d.jsxs)("div",{className:"activate__account",id:s?"formSubmitting":"",children:[Object(d.jsx)("h1",{children:"Click on the button below to verify your account"}),s&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"1%"}}),Object(d.jsx)("button",{type:"button",onClick:()=>{n(),r(t,a)},children:"Verify"})]})}));var ie=Object(l.b)((e=>{var t,a;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,resetPasswordConfirmForm:null===(a=e.auth)||void 0===a?void 0:a.resetPasswordConfirmForm}}),(e=>({startLoading:()=>e({type:E}),setNewPassword:(t,a,s)=>e(((e,t,a)=>async s=>{await R.setPassword(e,t).then((e=>{var t;alert(null===(t=e.data)||void 0===t?void 0:t.detail),s({type:k}),a("/",{replace:!0}),s({type:f})})).catch((e=>B(e))).finally((()=>W(s)))})(t,a,s)),openNewPassword:()=>e({type:L}),closeNewPassword:()=>e({type:k})})))((e=>{const t=Object(c.h)(),{password_token:a}=Object(c.i)(),{loading:n,resetPasswordConfirmForm:r}=e,{startLoading:i,setNewPassword:l,openNewPassword:o,closeNewPassword:u}=e,[j,b]=Object(s.useState)({new_password:"",confirm_password:""}),{new_password:m,confirm_password:O}=j,x=e=>b({...j,[e.target.name]:e.target.value});return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"activate__account",children:[Object(d.jsx)("h1",{children:"Click the button to set new password"}),Object(d.jsx)("button",{type:"button",onClick:o,children:"Set New password"})]}),Object(d.jsx)(g,{isOpen:r,children:Object(d.jsxs)("form",{className:"dialog",id:n?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Enter new password"}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"New Password"}),Object(d.jsx)("input",{type:"password",name:"new_password",onChange:x,value:m})]}),n&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"43%"}}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Confirm New Password"}),Object(d.jsx)("input",{type:"password",name:"confirm_password",onChange:x,value:O})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{p(j),u()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>{if(e.preventDefault(),v(j))return window.alert("Both fields are required");i(),l(j,a,t)},children:"Submit"})]})]})})]})}));a(92);var le=function(){return Object(d.jsxs)("div",{className:"not__found",children:[Object(d.jsx)("h1",{className:"not__foundHeading",children:"404 resource not found"}),Object(d.jsx)("p",{children:"Please try again."})]})};a(93);var oe=Object(l.b)((e=>{var t,a,s;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,changePasswordForm:null===(a=e.auth)||void 0===a?void 0:a.changePasswordForm,userId:null===(s=e.auth.user)||void 0===s?void 0:s.id}}),(e=>({startLoading:()=>e({type:E}),changeUserPassword:(t,a,s,n)=>e(((e,t,a)=>async s=>{await R.changePassword(e,t).then((e=>{var t;alert(H,null===(t=e.data)||void 0===t?void 0:t.detail),s({type:A}),s(V(a)),s({type:f})})).catch((e=>B(e))).finally((()=>W(s)))})(t,a,s)),closeChangePassword:()=>e({type:A})})))((e=>{const t=Object(c.h)(),{loading:a,changePasswordForm:n,userId:r}=e,{startLoading:i,changeUserPassword:l,closeChangePassword:o}=e,[u,j]=Object(s.useState)({current_password:"",new_password:"",confirm_new_password:""}),{current_password:b,new_password:m,confirm_new_password:O}=u,x=()=>{p(u)},_=e=>{j({...u,[e.target.name]:e.target.value})};return Object(d.jsx)(g,{isOpen:n,children:Object(d.jsxs)("form",{className:"dialog",id:a?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Change your password here"}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Old Password"}),Object(d.jsx)("input",{type:"password",name:"current_password",value:b,onChange:_})]}),a&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"40%"}}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"New Password"}),Object(d.jsx)("input",{type:"password",name:"new_password",value:m,onChange:_})]}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Confirm New Password"}),Object(d.jsx)("input",{type:"password",name:"confirm_new_password",value:O,onChange:_})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{x(),o()},children:"Close"}),Object(d.jsx)("button",{type:"submit",onClick:e=>{if(e.preventDefault(),v(u))return window.alert("All fields are required");i(),l(u,r,t,x)},children:"Submit"})]})]})})}));var ce=Object(l.b)((e=>{var t,a,s,n,r,i,l;return{first_name:null===(t=e.auth.user)||void 0===t?void 0:t.first_name,last_name:null===(a=e.auth.user)||void 0===a?void 0:a.last_name,username:null===(s=e.auth.user)||void 0===s?void 0:s.username,email:null===(n=e.auth.user)||void 0===n?void 0:n.email,bio:null===(r=e.auth.user)||void 0===r?void 0:r.bio,userId:null===(i=e.auth.user)||void 0===i?void 0:i.id,loading:null===(l=e.shared)||void 0===l?void 0:l.loading}}),(e=>({startLoading:()=>e({type:E}),updateUser:(t,a)=>e(((e,t)=>async a=>{await R.updateUser(e,t).then((e=>{var t,s;a({type:y,payload:null===(t=e.data)||void 0===t?void 0:t.user}),alert(null===(s=e.data)||void 0===s?void 0:s.detail)})).catch((e=>B(e))).finally((()=>W(a)))})(t,a)),openChangePassword:()=>e({type:I})})))((e=>{const{first_name:t,last_name:a,username:n,email:r,bio:i,userId:l,loading:o}=e,{startLoading:c,updateUser:u,openChangePassword:j}=e,[b,m]=Object(s.useState)({});Object(s.useEffect)((()=>{m({first_name:t,last_name:a,username:n,email:r,bio:i})}),[t,a,r,n,i]);const p=e=>{m({...b,[e.target.name]:e.target.value})};return Object(d.jsxs)("div",{className:"profile",id:o?"formSubmitting":"",children:[Object(d.jsx)("h2",{children:"Profile Details"}),Object(d.jsxs)("div",{className:"profile__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"First Name"}),Object(d.jsx)("input",{type:"text",name:"first_name",value:b.first_name,onChange:p})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Last Name"}),Object(d.jsx)("input",{type:"text",name:"last_name",value:b.last_name,onChange:p})]})]}),o&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"30%"}}),Object(d.jsxs)("div",{className:"profile__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Username"}),Object(d.jsx)("input",{type:"text",name:"username",value:b.username,onChange:p})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Email"}),Object(d.jsx)("input",{type:"email",name:"email",value:b.email,onChange:p})]})]}),Object(d.jsxs)("div",{className:"profile__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Bio"}),Object(d.jsx)("textarea",{name:"bio",value:b.bio,onChange:p})]}),Object(d.jsxs)("div",{className:"profile__Buttons",children:[Object(d.jsx)("button",{type:"button",className:"change__password",onClick:j,children:"Change Password"}),Object(d.jsx)("button",{type:"submit",className:"update",onClick:e=>{e.preventDefault(),v(b)&&alert("Fill all fields are to update your profile"),c(),u(b,l)},children:"Update Profile"})]}),Object(d.jsx)(oe,{})]})}));var de=Object(l.b)((e=>{var t,a,s;return{loading:null===(t=e.shared)||void 0===t?void 0:t.loading,userId:null===(a=e.auth)||void 0===a||null===(s=a.user)||void 0===s?void 0:s.id}}),(e=>({addNewTitle:(t,a,s)=>e(((e,t,a)=>async s=>{await R.addNewTitle(e,t).then((e=>{var t,n;s({type:U,payload:null===(t=e.data)||void 0===t?void 0:t.new_title}),window.alert(null===(n=e.data)||void 0===n?void 0:n.detail),a()})).catch((e=>B(e))).finally((()=>W(s)))})(t,a,s)),startLoading:()=>e({type:E})})))((e=>{const{openAddTitle:t,loading:a,userId:n}=e,{setOpenAddTitle:r,addNewTitle:i,startLoading:l}=e,[o,c]=Object(s.useState)({title:"",lat:"",lon:""}),u=e=>{c({...o,[e.target.name]:e.target.value})},j=()=>{p(o)},{title:b,lat:m,lon:O}=o;return Object(d.jsx)(J,{isOpen:t,maxWidth:"700px",children:Object(d.jsxs)("form",{className:"dialog",onSubmit:e=>{if(e.preventDefault(),v(o))return window.alert();l(),i(n,{...o},j)},id:a?"formSubmitting":"",children:[Object(d.jsx)("h3",{children:"Enter title details"}),Object(d.jsxs)("div",{className:"dialog__rowSingleItem",children:[Object(d.jsx)("label",{htmlFor:"",children:"Title No:"}),Object(d.jsx)("input",{type:"text",name:"title",onChange:u,value:b})]}),a&&Object(d.jsx)(h.a,{style:{position:"absolute",marginLeft:"43%"}}),Object(d.jsxs)("div",{className:"dialog__row",children:[Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Latitude"}),Object(d.jsx)("input",{type:"text",name:"lat",onChange:u,value:m})]}),Object(d.jsxs)("span",{children:[Object(d.jsx)("label",{htmlFor:"",children:"Longitude"}),Object(d.jsx)("input",{type:"text",name:"lon",onChange:u,value:O})]})]}),Object(d.jsxs)("div",{className:"form__Buttons",children:[Object(d.jsx)("button",{type:"button",onClick:()=>{j(),r(!1)},children:"Close"}),Object(d.jsx)("button",{type:"submit",children:"Submit"})]})]})})}));var ue=Object(l.b)((e=>{var t,a,s;return{titlesList:null===(t=e.search)||void 0===t?void 0:t.titlesList,userId:null===(a=e.auth)||void 0===a||null===(s=a.user)||void 0===s?void 0:s.id}}),(e=>({getAllTitles:t=>e((e=>async t=>{await R.getAllTitles(e).then((e=>{var a;t({type:D,payload:null===(a=e.data)||void 0===a?void 0:a.titles_data})})).catch((e=>B(e))).finally((()=>W(t)))})(t)),startLoading:()=>e({type:E})})))((e=>{const{titlesList:t,userId:a,startLoading:n,getAllTitles:r}=e,[i,l]=Object(s.useState)(!1);Object(s.useEffect)((()=>{a&&0===(null===t||void 0===t?void 0:t.length)&&(n(),r(a))}),[null===t||void 0===t?void 0:t.length,n,r,a]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"table__parent",children:[Object(d.jsxs)("div",{className:"table__parentHeader",children:[Object(d.jsx)("h3",{children:"Maintain titles"}),Object(d.jsx)("button",{type:"button",className:"add__button",onClick:()=>{l(!0)},children:"Add Title"})]}),Object(d.jsx)("table",{className:"table__listing",children:(null===t||void 0===t?void 0:t.length)>0?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("tr",{className:"table__listingHeader",children:[Object(d.jsx)("th",{children:"Title No"}),Object(d.jsx)("th",{children:"Lat"}),Object(d.jsx)("th",{children:"Lon"})]}),null===t||void 0===t?void 0:t.map((e=>Object(d.jsxs)("tr",{className:"table__listingItem",children:[Object(d.jsx)("td",{children:null===e||void 0===e?void 0:e.title}),Object(d.jsx)("td",{children:null===e||void 0===e?void 0:e.lat}),Object(d.jsx)("td",{children:null===e||void 0===e?void 0:e.lon})]},null===e||void 0===e?void 0:e.id)))]}):Object(d.jsx)("h4",{className:"not__available",children:"No titles available"})})]}),i&&Object(d.jsx)(de,{openAddTitle:i,setOpenAddTitle:l})]})}));var je=Object(l.b)((e=>{var t;return{profile_type:null===(t=e.auth.user)||void 0===t?void 0:t.profile_type}}),(e=>({getUser:()=>e(M())})))((function(e){const t=localStorage.getItem("session_cookie"),{getUser:a}=e,{profile_type:n}=e;return Object(s.useEffect)((()=>{t&&a()}),[a,t]),Object(d.jsx)("div",{id:"body-pd",children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(X,{}),Object(d.jsx)(se,{}),Object(d.jsxs)(c.e,{children:[Object(d.jsx)(c.c,{exact:!0,path:"/",element:Object(d.jsx)(ee,{})}),Object(d.jsx)(c.c,{exact:!0,path:"/user/password-reset/:password_token/",element:Object(d.jsx)(ie,{})}),Object(d.jsx)(c.c,{exact:!0,path:"/user/activate/:activation_token/",element:Object(d.jsx)(re,{})}),Object(d.jsxs)(c.c,{exact:!0,path:"/",element:Object(d.jsx)(u,{}),children:["Staff"===n&&Object(d.jsx)(c.c,{exact:!0,path:"/staff/maintain-titles/",element:Object(d.jsx)(ue,{})}),["Staff","Valuer"].includes(n)&&Object(d.jsx)(d.Fragment,{}),Object(d.jsx)(c.c,{exact:!0,path:"/profile",element:Object(d.jsx)(ce,{})}),Object(d.jsx)(c.c,{exact:!0,path:"/dashboard/",element:Object(d.jsx)(ne,{})})]}),Object(d.jsx)(c.c,{element:Object(d.jsx)(le,{})})]})]})})}));var be=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,120)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:r,getTTFB:i}=t;a(e),s(e),n(e),r(e),i(e)}))},he=a(23),me=a(53),ve=a(54);const pe={signupForm:!1,loginForm:!1,loggedIn:!1,forgotPasswordForm:!1,resendActivationForm:!1,resetPasswordConfirmForm:!1,changePasswordForm:!1,user:{}};var Oe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;const{type:a,payload:s}=t;switch(a){case x:return{...e,signupForm:!0};case _:return{...e,signupForm:!1};case f:return{...e,loginForm:!0};case w:return{...e,loginForm:!1};case y:return{...e,user:s,loggedIn:!0};case S:return{...e,forgotPasswordForm:!0};case C:return{...e,forgotPasswordForm:!1};case F:return{...e,resendActivationForm:!0};case P:return{...e,resendActivationForm:!1};case L:return{...e,resetPasswordConfirmForm:!0};case k:return{...e,resetPasswordConfirmForm:!1};case I:return{...e,changePasswordForm:!0};case A:return{...e,changePasswordForm:!1};case N:return pe;default:return e}};const ge={loading:!1};var xe=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;const{type:a}=t;switch(a){case E:return{...e,loading:!0};case T:return{...e,loading:!1};default:return e}};const _e=(e,t)=>({...e,...t}),fe={titlesList:[]},we=(e,t)=>_e(e,{titlesList:[...e.titlesList,t]}),ye=(e,t)=>_e(e,{titlesList:t});var Ne=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;const{type:a,payload:s}=t;switch(a){case U:return we(e,s);case D:return ye(e,s);default:return e}},Se=Object(he.combineReducers)({auth:Oe,shared:xe,search:Ne});var Ce=Object(he.createStore)(Se,Object(me.composeWithDevTools)(Object(he.applyMiddleware)(ve.a)));i.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(l.a,{store:Ce,children:Object(d.jsx)(je,{})})}),document.getElementById("root")),be()}},[[94,1,2]]]);
//# sourceMappingURL=main.e0e68be4.chunk.js.map